require 'uglifier'

desc "minify and uglify the scripty script"
task :build do
	src = File.read('gif-roulette.js')
	uglified = Uglifier.compile(src)
	dist = File.write('gif-roulette.min.js', uglified)
end

desc "construct README with installable bookmarklet"
task :readme => :build do
	bookmarklet = "javascript:#{File.read('gif-roulette.min.js')}"
	File.write('README.md',
<<-EOS
### gif-roulette

Replace every image on the page with a random pic from imgur.

#### Installation instructions:

Drag <a href='#{bookmarklet}'>this link</a> to your toolbar. Then go to a page with some images and click it.
EOS
	)
end

task :default => :readme
